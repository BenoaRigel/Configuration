Процедура ПередНачаломРаботыСистемы(Отказ)
	
	//Вызов функции 
	ИнформацияОПользователе = РаботаСПользователями.ИнформацияОПользователе(); 
	
	//Впускает юзера в определенное время
	Если  ИнформацияОПользователе.АДмин = Истина Тогда
		Отказ = Ложь;	
	ИначеЕсли ИнформацияОПользователе.Статус = "Утро" Тогда
		Отказ = Истина;
		Предупреждение("Рабочий день еще не начался. Приходите позже", ,"Доброе Утро");
	ИначеЕсли ИнформацияОПользователе.Статус = "Вечер" Тогда
		//Отказ = Истина;
		Предупреждение("Рабочий день закончился. Приходите завтра", ,"Доброй вечер");
	ИначеЕсли ИнформацияОПользователе.Статус = "День" Тогда  
		Отказ = Ложь;
	КонецЕсли;
	
	//Вызывается список с вариантами обедов
	ВыбранныеОбеды = Новый Массив;
	СписокОбедов = ИнформацияОПользователе.Список;
	//ИнфооЗаписи = РаботаСПользователями.ЗаписатьИнформациюВСправочник(СписокОбедов, ИнформацияОПользователе.Юзер);
	
	Если НЕ ИнформацияОПользователе.Админ И ИнформацияОПользователе.ПользовательНеДелалВыбор Тогда
		СпроситьПользователяИЗаписатьОтвет(ВыбранныеОбеды, СписокОбедов);

	КонецЕсли;
	
	РаботаСПользователями.ЗаписатьИнформациюВСправочник(ВыбранныеОбеды,ИнформацияОПользователе.Юзер);

	
КонецПроцедуры

Процедура СпроситьПользователяИЗаписатьОтвет(Знач ВыбранныеОбеды, Знач СписокОбедов)
	
	Перем Элемент;                                  
	Пока Истина Цикл;                               
		Если СписокОбедов.ОтметитьЭлементы()  Тогда 
			Для Каждого Элемент Из СписокОбедов Цикл
				Если Элемент.Пометка Тогда
					ВыбранныеОбеды.Добавить(Элемент.Значение); 
					Сообщить("Пользователь выбрал " + Элемент.Значение);
				КонецЕсли;	                                                            
			КонецЦикла;
			
			Если ВыбранныеОбеды.Количество() > 0 Тогда
				Прервать; 
			КонецЕсли			
		КонецЕсли;
		
	КонецЦикла;

КонецПроцедуры
                                                                    
